<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>How to let ROS play happily with fish | Yanda&#39;s Lab</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="tech," />
  

  <meta name="description" content="ROS is a common platform for robot development. Normally it has some descent document, but not for rosbash. It is stated in the document that  The rosbash package includes limited support for zsh and">
<meta name="keywords" content="tech">
<meta property="og:type" content="article">
<meta property="og:title" content="How to let ROS play happily with fish">
<meta property="og:url" content="http://yodahuang.github.io/2017/11/20/How-to-let-ROS-play-happily-with-fish/index.html">
<meta property="og:site_name" content="Yanda's Lab">
<meta property="og:description" content="ROS is a common platform for robot development. Normally it has some descent document, but not for rosbash. It is stated in the document that  The rosbash package includes limited support for zsh and">
<meta property="og:updated_time" content="2017-12-25T08:20:30.194Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to let ROS play happily with fish">
<meta name="twitter:description" content="ROS is a common platform for robot development. Normally it has some descent document, but not for rosbash. It is stated in the document that  The rosbash package includes limited support for zsh and">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbe6" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-65976996-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  

  


  
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">Box</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">Box</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            Blog
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/project/"
            rel="noopener noreferrer"
            target="_blank"
            >
            Project
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            Category
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            Tag
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            About
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="ROUND_RECT"
            href="/atom.xml"
            rel="noopener noreferrer"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Getting-functionalities-such-as-roscd-and-rosed"><span class="toc-text">Getting functionalities such as roscd and rosed</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sourcing-catkin-workspace"><span class="toc-text">Sourcing catkin workspace</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#I’m-lazy-Is-there-a-easier-way"><span class="toc-text">I’m lazy. Is there a easier way?</span></a></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-How-to-let-ROS-play-happily-with-fish" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">How to let ROS play happily with fish</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2017.11.20</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>Yanda Huang</span>
        </span>
      

      


      
        <span>
          <i class="icon-comment"></i>
          <a href="http://yodahuang.github.io/2017/11/20/How-to-let-ROS-play-happily-with-fish/#disqus_thread"></a>
        </span>
      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      

      
      
    </div>
  </header>

  <div class="article-content">
    
      <p><code>ROS</code> is a common platform for robot development. Normally it has some descent document, but not for <a href="http://wiki.ros.org/rosbash" target="_blank" rel="external">rosbash</a>. It is stated in the document that</p>
<blockquote>
<p>The <code>rosbash</code> package includes limited support for <code>zsh</code> and <code>tcsh</code> by way of sourcing the <code>roszsh</code> or <code>rostcsh</code> files respectively. We currently do not provide documentation on these shells, though much of the functionality is similar to the bash shell extensions.</p>
</blockquote>
<p>What if I want to use <a href="https://fishshell.com" target="_blank" rel="external">fish shell</a> instead of <code>bash</code>?  There is a file called <code>rosfish</code> <a href="https://github.com/ros/ros/blob/lunar-devel/tools/rosbash/rosfish" target="_blank" rel="external">in Github</a> but how to use that?</p>
<h2 id="Getting-functionalities-such-as-roscd-and-rosed"><a href="#Getting-functionalities-such-as-roscd-and-rosed" class="headerlink" title="Getting functionalities such as roscd and rosed"></a>Getting functionalities such as <code>roscd</code> and <code>rosed</code></h2><p>Instead of sourcing <code>source /opt/ros/lunar/setup.bash</code> as is told in the official document, go to your <code>~/.config/fish/config.fish</code> file (which is essentially <code>.bashrc</code> for bash), add the following line:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">source</span> /opt/ros/kinetic/share/rosbash/rosfish</div></pre></td></tr></table></figure>
<h2 id="Sourcing-catkin-workspace"><a href="#Sourcing-catkin-workspace" class="headerlink" title="Sourcing catkin workspace"></a>Sourcing catkin workspace</h2><p>To source your workspace, you can’t just source the file in <code>devel/setup.bash</code> since it’s written in shell script that fish do not understand. Instead, install <a href="https://github.com/edc/bass" target="_blank" rel="external">bass</a> as a bridge between fish and shell script. I recommend using <a href="https://github.com/fisherman/fisherman" target="_blank" rel="external">fisherman</a> for installing bass. </p>
<p>Now every time you need to source your workspace, run this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bass <span class="built_in">source</span> devel/setup.bash</div></pre></td></tr></table></figure>
<h3 id="I’m-lazy-Is-there-a-easier-way"><a href="#I’m-lazy-Is-there-a-easier-way" class="headerlink" title="I’m lazy. Is there a easier way?"></a>I’m lazy. Is there a easier way?</h3><p>I got you. Why sourcing scripts manually when everything can be automated? Let’s use fish’s excellent hook functionality to source the files for us.</p>
<p>Place the following file in <code>~/.config/fish/conf.d</code>, you can name it <code>catkin.autosource.fish</code> or whatever</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> catkinSource --on-variable PWD</div><div class="line">    status --is-command-substitution; and <span class="built_in">return</span></div><div class="line">    <span class="keyword">if</span> <span class="built_in">test</span> <span class="_">-e</span> <span class="string">".catkin_workspace"</span></div><div class="line">        bass <span class="built_in">source</span> devel/setup.bash</div><div class="line">        <span class="built_in">echo</span> <span class="string">"Configured the folder as a workspace"</span></div><div class="line">    end</div><div class="line">end</div></pre></td></tr></table></figure>
<p>The script monitor the variable <code>PWD</code>, which is the location you’re at, if it changes, search for the <code>.catkin_workspace</code> file (which in the workspace when you create it). If it finds the file, the source it for you.</p>
<p>Happy fishing!</p>

    
  </div>
</article>


   

   
  <div class="box-prev-next clearfix">
    <a class="hide pull-left" href="/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2017/07/09/Where-to-go/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              Blog
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/project/"
              rel="noopener noreferrer"
              target="_blank"
              >
              Project
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              Category
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              Tag
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              About
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/atom.xml"
              rel="noopener noreferrer"
              target="_blank"
              >
              RSS
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'yodahuang';
    
    var disqus_url = 'http://yodahuang.github.io/2017/11/20/How-to-let-ROS-play-happily-with-fish/';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script id="dsq-count-scr" src="//yodahuang.disqus.com/count.js" async></script>



    




    

    
	
    
	
  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
